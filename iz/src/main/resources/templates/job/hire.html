<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<!DOCTYPE html>
<html class="h-full bg-[#f0f0f0]">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Title</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/default.css}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <style type="text/tailwindcss">
        @theme {
            --color-main-sky: #00a3ed;
        }

        /* 스크롤바 숨기기 */
        .hide-scrollbar {
            -ms-overflow-style: none;  /* IE, Edge */
            scrollbar-width: none;     /* Firefox */
        }

        /* Chrome, Safari, Opera에서 스크롤바 숨기기 */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        @media screen and (max-width: 768px) {
            /* 입력 필드 컨테이너를 세로로 배치 */
            .채용공고-필터-컨테이너 {
                flex-direction: column !important;
                gap: 0.75rem !important;
            }

            /* 각 입력 필드가 전체 너비 사용 */
            .채용공고-필터-컨테이너 > div {
                width: 100% !important;
            }

            /* 검색 버튼 위치 조정 */
            .search-button {
                margin-top: 0.75rem !important;
                align-self: flex-end !important;
            }

            /* 드롭다운 내부 텍스트 크기 조정 */
            select {
                font-size: 0.9rem !important;
            }
        }
    </style>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
<div class="flex flex-col w-full md:w-[600px] md:mx-auto md:shadow-md bg-white min-h-screen pt-8 relative">
    <div class="pt-20"><header th:replace="~{header :: header} " class="pt-4"></header></div>
    <footer th:replace="~{footer :: footer}" class="pt-4"></footer>

    <div class="px-10"> <!-- 헤더의 px-10과 동일한 패딩 적용 -->
        <h1 class="text-2xl font-bold mb-6">채용공고</h1>
        <div class="flex items-center gap-2 mb-1">
            <div class="w-1/3 text-center font-semibold text-gray-700">
                <label>근무지</label>
            </div>
            <div class="w-1/3 text-center font-semibold text-gray-700">
                <label>산업/업종</label>
            </div>
            <div class="w-1/3 text-center font-semibold text-gray-700">
                <label>학력</label>
            </div>
            <div class="w-8"></div>
        </div>

        <div class="flex items-center gap-4 mb-1">
            <div class="relative flex-1">
                <select class="w-full pl-2 pr-8 py-1.5 border-b-2 border-gray-200 text-sm appearance-none bg-white cursor-pointer focus:outline-none focus:border-b-2 focus:border-gray-400 transition-colors">
                    <option th:text="${#authentication.getPrincipal().getUser().getLoc_mod}" selected></option>
                    <option value="117000">전국</option>
                    <option value="101000">서울</option>
                    <option value="102000">경기</option>
                    <option value="118000">세종</option>
                    <option value="103000">광주</option>
                    <option value="104000">대구</option>
                    <option value="105000">대전</option>
                    <option value="106000">부산</option>
                    <option value="107000">울산</option>
                    <option value="108000">인천</option>
                    <option value="109000">강원</option>
                    <option value="110000">경남</option>
                    <option value="111000">경북</option>
                    <option value="112000">전남</option>
                    <option value="113000">전북</option>
                    <option value="114000">충북</option>
                    <option value="115000">충남</option>
                    <option value="116000">제주</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                    </svg>
                </div>
            </div>
            <div class="relative flex-1">
                <select class="w-full pl-2 pr-8 py-1.5 border-b-2 border-gray-200 text-sm appearance-none bg-white cursor-pointer focus:outline-none focus:border-b-2 focus:border-gray-400 transition-colors">
                    <option th:text="${#authentication.getPrincipal().getUser().getInd_cd}" selected></option>
                    <option value="1">서비스업</option>
                    <option value="2">제조·화학</option>
                    <option value="3">IT·웹·통신</option>
                    <option value="4">은행·금융업</option>
                    <option value="5">미디어·디자인</option>
                    <option value="6">교육업</option>
                    <option value="7">의료·제약·복지</option>
                    <option value="8">판매·유통</option>
                    <option value="9">건설업</option>
                    <option value="10">기관·협회</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                    </svg>
                </div>
            </div>
            <div class="relative flex-1">
                <select class="w-full pl-2 pr-8 py-1.5 border-b-2 border-gray-200 text-sm appearance-none bg-white cursor-pointer focus:outline-none focus:border-b-2 focus:border-gray-400 transition-colors">
                    <option th:text="${#authentication.getPrincipal().getUser().getEdu_lv}" selected></option>
                    <option value="0">학력무관</option>
                    <option value="1">고등학교졸업</option>
                    <option value="2">대학졸업(2,3년)</option>
                    <option value="3">대학교졸업(4년)</option>
                    <option value="4">석사졸업</option>
                    <option value="5">박사졸업</option>
                    <option value="6">고등학교졸업이상</option>
                    <option value="7">대학졸업(2,3년)이상</option>
                    <option value="8">대학교졸업(4년)이상</option>
                    <option value="9">석사졸업이상</option>
                </select>
                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                    <svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20">
                        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                    </svg>
                </div>
            </div>
            <button class="p-1 bg-white rounded-lg cursor-pointer hover:bg-gray-50 search-button">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5"
                          d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                </svg>
            </button>
        </div>

        <br><br>

        <!-- 곧 마감인 공고 영역 -->
        <h1 class="text-2xl font-bold mb-2">
            곧 마감인 공고
        </h1>
        <div class="flex items-center mb-6">
            <div id="box-container" class="flex gap-4 cursor-grab w-full overflow-x-auto hide-scrollbar scroll-smooth px-0 py-2">
                <div th:each="job : ${deadlineJobs}" class="box flex-shrink-0 w-[280px] min-h-[200px] bg-white p-4 rounded-lg border border-gray-200 shadow-sm flex flex-col justify-between relative transition-transform duration-200 select-none">
                    <button th:data-job-id="${job.id}"
                            th:data-job-company-name="${job.companyName}"
                            th:data-job-expiration-timestamp="${job.expirationTimestamp}"
                            th:class="'scrap-btn absolute top-4 right-3 text-xl ' + (${@jobService.checkIfScraped(job.id, #authentication.principal.user.member_id)} ? 'text-yellow-400' : 'text-gray-300')">
                        <i class="fas fa-star cursor-pointer"></i>
                    </button>
                    <div>
                        <h2 class="text-lg font-bold mb-2 text-gray-800 break-words whitespace-normal w-full" th:text="${job.companyName}">기업명</h2>
                        <p class="text-sm text-gray-700 mb-3 break-words whitespace-normal w-full" th:text="${job.title}">공고 제목</p>
                        <div class="space-y-1 text-xs text-gray-600">
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-map-marker-alt"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.locationName}">지역</span>
                            </div>
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-building"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.industryName}">업종</span>
                            </div>
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-users"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.experienceMax == 0 and job.experienceMin == 0} ? '신입'
                                    : (${job.experienceMax == job.experienceMin} ? '경력 ' + ${job.experienceMax} + '년'
                                    : '경력 ' + (${job.experienceMax} >= ${job.experienceMin} ? ${job.experienceMin} + '~' + ${job.experienceMax}
                                    : ${job.experienceMax} + '~' + ${job.experienceMin}) + '년')">경력</span>
                            </div>
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-user-graduate"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.educationLevel}">학력</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 pt-2 border-t border-gray-200">
                        <p class="text-xs break-words whitespace-normal w-full">
                            마감일: <span th:text="${job.expirationTimestamp}" class="timestamp"></span>
                        </p>
                        <a th:href="${job.url}" target="_blank"
                           class="mt-2 text-xs text-blue-600 hover:text-blue-800 flex items-start gap-2 w-full">
                            <i class="fas fa-external-link-alt"></i>
                            <span class="flex-1 min-w-0 break-words whitespace-normal">상세보기</span>
                        </a>
                    </div>
                </div>
                <div class="flex-shrink-0 w-[280px] h-[200px] flex items-center justify-center">
                    <button id="loadMoreDeadline" class="w-20 h-20 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 flex items-center justify-center cursor-pointer">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- 최근에 올라온 공고 영역 -->
        <h1 class="text-2xl font-bold mb-2">
            최근에 올라온 공고
        </h1>
        <div class="flex items-center mb-6">
            <div id="box-container2" class="flex gap-4 cursor-grab w-full overflow-x-auto hide-scrollbar scroll-smooth px-0 py-2">
                <div th:each="job : ${recentJobs}" class="box flex-shrink-0 w-[280px] min-h-[200px] bg-white p-4 rounded-lg border border-gray-200 shadow-sm flex flex-col justify-between relative transition-transform duration-200 select-none">
                    <button th:data-job-id="${job.id}"
                            th:data-job-company-name="${job.companyName}"
                            th:data-job-expiration-timestamp="${job.expirationTimestamp}"
                            th:class="'scrap-btn absolute top-4 right-3 text-xl ' + (${@jobService.checkIfScraped(job.id, #authentication.principal.user.member_id)} ? 'text-yellow-400' : 'text-gray-300')">
                        <i class="fas fa-star cursor-pointer"></i>
                    </button>
                    <div>
                        <h2 class="text-lg font-bold mb-2 text-gray-800 break-words whitespace-normal w-full" th:text="${job.companyName}">기업명</h2>
                        <p class="text-sm text-gray-700 mb-3 break-words whitespace-normal w-full" th:text="${job.title}">공고 제목</p>
                        <div class="space-y-1 text-xs text-gray-600">
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-map-marker-alt"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.locationName}">지역</span>
                            </div>
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-building"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.industryName}">업종</span>
                            </div>
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-users"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.experienceMax == 0 and job.experienceMin == 0} ? '신입'
                                    : (${job.experienceMax == job.experienceMin} ? '경력 ' + ${job.experienceMax} + '년'
                                    : '경력 ' + (${job.experienceMax} >= ${job.experienceMin} ? ${job.experienceMin} + '~' + ${job.experienceMax}
                                    : ${job.experienceMax} + '~' + ${job.experienceMin}) + '년')">경력</span>
                            </div>
                            <div class="flex items-start gap-2 w-full">
                                <i class="fas fa-user-graduate"></i>
                                <span class="flex-1 min-w-0 break-words whitespace-normal" th:text="${job.educationLevel}">학력</span>
                            </div>
                        </div>
                    </div>
                    <div class="mt-3 pt-2 border-t border-gray-200">
                        <p class="text-xs break-words whitespace-normal w-full">
                            마감일: <span th:text="${job.expirationTimestamp}" class="timestamp"></span>
                        </p>
                        <a th:href="${job.url}" target="_blank"
                           class="mt-2 text-xs text-blue-600 hover:text-blue-800 flex items-start gap-2 w-full">
                            <i class="fas fa-external-link-alt"></i>
                            <span class="flex-1 min-w-0 break-words whitespace-normal">상세보기</span>
                        </a>
                    </div>
                </div>
                <div class="flex-shrink-0 w-[280px] h-[200px] flex items-center justify-center">
                    <button id="loadMoreRecent" class="w-20 h-20 bg-gray-200 text-gray-600 rounded-full hover:bg-gray-300 flex items-center justify-center cursor-pointer">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script th:src="@{/js/hireScript.js}"></script>
</body>
</html>
